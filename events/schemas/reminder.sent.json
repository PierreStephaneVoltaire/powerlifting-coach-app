{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Reminder Sent Event",
  "description": "Event emitted when a scheduled reminder is sent to a user",
  "type": "object",
  "required": [
    "schema_version",
    "event_type",
    "client_generated_id",
    "user_id",
    "timestamp",
    "source_service",
    "data"
  ],
  "properties": {
    "schema_version": {
      "type": "string",
      "const": "1.0.0",
      "description": "Schema version for this event"
    },
    "event_type": {
      "type": "string",
      "const": "reminder.sent",
      "description": "Type of event"
    },
    "client_generated_id": {
      "type": "string",
      "format": "uuid",
      "description": "Unique ID generated by the client for idempotency"
    },
    "user_id": {
      "type": "string",
      "format": "uuid",
      "description": "ID of the user receiving the reminder"
    },
    "timestamp": {
      "type": "string",
      "format": "date-time",
      "description": "ISO 8601 timestamp when event was generated"
    },
    "source_service": {
      "type": "string",
      "const": "reminder-service",
      "description": "Service that generated this event"
    },
    "data": {
      "type": "object",
      "required": [
        "reminder_id",
        "program_id",
        "reminder_type",
        "message"
      ],
      "properties": {
        "reminder_id": {
          "type": "string",
          "format": "uuid",
          "description": "ID of the reminder"
        },
        "program_id": {
          "type": "string",
          "format": "uuid",
          "description": "ID of the associated program"
        },
        "reminder_type": {
          "type": "string",
          "enum": ["comp_week", "comp_2weeks", "comp_4weeks"],
          "description": "Type of reminder"
        },
        "message": {
          "type": "string",
          "description": "Reminder message content"
        }
      }
    }
  }
}
